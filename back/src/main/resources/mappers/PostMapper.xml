<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gardener.PostMapper">
  <!--내 글 보기-->
    <select id="selectByLoginId" 
		 parameterType="string"
		 resultType="Post">
SELECT p.maintitle, p.writer, p.content, p.maintitleimg 
FROM post p JOIN member m ON (p.loginid = m.loginid)
WHERE m.loginId =#{loginId}
  </select>
  <!--글입력-->
  <insert id="insertPost" parameterType="Post">
INSERT INTO post(postNum, mainTitle, writer, mainTitleImg, content, loginId) VALUES(post_seq.nextval, #{mainTitle}, #{writer}, #{mainTitleImg}, #{content}, #{member.loginId})
</insert>
<resultMap id="joinMap" type="Post" autoMapping="true">
	<id property="postnum" column="postnum"/>
	<result property="mainTitle" column="mainTitle"/>
	<result property="writer" column="writer"/>
	<result property="content" column="content"/>
	<result property="mainTitleImg" column="mainTitleImg"/>
	<result property="loginId" column="loginId"/>
	<association property="member" javaType="Member" autoMapping="true"/>
</resultMap>
</mapper>